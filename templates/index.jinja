{% extends "base.jinja" %}{% block content %}
<section class="feed">
  {% for post in posts %}
  <div class="post">
    <div class="post__left">
      <h4 class="name">{{post.name}}</h4>
      <p><a class="content" href="/{{user_id}}/{{post.id}}">{{post.content}}</a></p>
      {# likes #}
      <br/>
      <p class="interactions">
        <span class="approvals">
          {% set ns=namespace(mine=false) %}
          {% for approval in post.approvals %}
            {% if approval.user_id==user_id %}
              {% set ns.mine=true %}
            {% endif %}
          {% endfor %}
          <a class="post--link{% if ns.mine %} mine{% endif %}" href="/{{user_id}}/{{post.id}}/approve/1">{{post.approvals|length}} approval{% if post.approvals|length!=1 %}s{% endif %}</a>
        </span>
        {% if post.comment_count!=0 %}
          <a class="post--link" href="/{{user_id}}/{{post.id}}">{{post.comment_count}} comment{% if post.comment_count!=1 %}s{% endif %}</a>
        {% endif %}
      </p>
    </div>
    <div class="post__right">
      <p>{{post.when}}</p>
    {% if user_id==post.user_id %}
      <div class="alter_buttons">
        <a class="alter__edit" href="/{{user_id}}/{{post.id}}/edit_post_form">edit</a>
        <br/>
        <a class="alter__delete" href="/{{user_id}}/{{post.id}}/delete_post">X</a>
      </div>
    {% endif %}
    </div>
  </div>
  <br/>
  {% endfor %}
</section>
<section class="something_else_not_sure_yet">something will go here</section>
{% endblock %}
