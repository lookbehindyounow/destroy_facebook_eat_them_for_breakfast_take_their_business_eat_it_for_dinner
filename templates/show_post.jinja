{% extends 'base.jinja' %}{% block content %}
<div class="focused_container post">
    <div class="post__left">
        <h3>{{post.name}}</h3>
        <p>{{post.content}}</p>
        <br/>
        <a class="post--link" href="/{{user_id}}/{{post.id}}/approve/0">{{post.approvals|length}} approval{% if post.approvals|length!=1 %}s{% endif %}</a>
    </div>
    <div class="post__right">
        <p>{{post.when}}</p>
    {% if user_id==post.user_id %}
        <div class="alter_buttons">
            <a class="alter__edit" href="/{{user_id}}/{{post.id}}/edit_post_form">edit</a>
            <br/>
            <a class="alter__delete" href="/{{user_id}}/{{post.id}}/delete_post">X</a>
        </div>
    {% endif %}
    </div>
    <hr/>
    {% for comment in comments %}
        <div class="comment">
            <div class="comment__left">
                <h5>{{comment.name}}</h5>
                <p>{{comment.content}}</p>
                <br/>
                <a class="post--link" href="/{{user_id}}/{{post.id}}/{{comment.id}}/approve">{{comment.approvals|length}} approval{% if comment.approvals|length!=1 %}s{% endif %}</a>
            </div>
            <div class="comment__right">
                <p>{{comment.when}}</p>
            {% if user_id==comment.user_id %}
                {% if role=="edit_comment" %}
                    {% block edit_comment %}{% endblock edit_comment %}
                {% else %}
                    <div class="alter_buttons">
                        <a class="alter__edit" href="/{{user_id}}/{{post.id}}/edit_post_form">edit</a>
                        <br/>
                        <a class="alter__delete" href="/{{user_id}}/{{post.id}}/delete_post">X</a>
                    </div>
                {% endif %}
            {% endif %}
            </div>
        </div>
    {% endfor %}
    {% block form %}
        <a class="comment_button" href="/{{user_id}}/{{post.id}}/new_comment_form">comment</a>
    {% endblock form %}
</div>
{%endblock%}